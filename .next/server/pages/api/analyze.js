"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/analyze";
exports.ids = ["pages/api/analyze"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "@google/generative-ai":
/*!****************************************!*\
  !*** external "@google/generative-ai" ***!
  \****************************************/
/***/ ((module) => {

module.exports = import("@google/generative-ai");;

/***/ }),

/***/ "node:fs/promises":
/*!***********************************!*\
  !*** external "node:fs/promises" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:fs/promises");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fanalyze.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fanalyze.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_analyze_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/analyze.js */ \"(api)/./pages/api/analyze.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_analyze_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_analyze_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_analyze_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_analyze_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/analyze\",\n        pathname: \"/api/analyze\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_analyze_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFuYWx5emUmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmFuYWx5emUuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDbUQ7QUFDbkQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGtEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxrREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rYXp1aGlyby10YWthbXVyYS1scC8/OGU2YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL2FuYWx5emUuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hbmFseXplXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYW5hbHl6ZVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fanalyze.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/analyze.js":
/*!******************************!*\
  !*** ./pages/api/analyze.js ***!
  \******************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:fs/promises */ \"node:fs/promises\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @google/generative-ai */ \"@google/generative-ai\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_google_generative_ai__WEBPACK_IMPORTED_MODULE_2__]);\n_google_generative_ai__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_2__.GoogleGenerativeAI(process.env.GEMINI_API_KEY);\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        const { imageUrl, title, recipient, situation, notes, regenerate } = req.body;\n        if (!imageUrl) {\n            return res.status(400).json({\n                error: \"Image URL is required\"\n            });\n        }\n        // Fetch the image and convert to base64\n        const imageResponse = await fetch(imageUrl);\n        const imageBuffer = await imageResponse.arrayBuffer();\n        const base64Image = Buffer.from(imageBuffer).toString(\"base64\");\n        // Determine media type\n        const contentType = imageResponse.headers.get(\"content-type\") || \"image/jpeg\";\n        const mediaType = contentType.includes(\"png\") ? \"image/png\" : \"image/jpeg\";\n        // Build the prompt\n        const contextParts = [];\n        if (recipient) contextParts.push(`贈り先: ${recipient}`);\n        if (situation) contextParts.push(`シチュエーション: ${situation}`);\n        if (notes) contextParts.push(`補足メモ: ${notes}`);\n        const contextStr = contextParts.length > 0 ? `\\n\\n【入力情報】\\n${contextParts.join(\"\\n\")}` : \"\";\n        const titleInstruction = title ? `タイトルは「${title}」を使用してください。` : \"タイトルは5〜10文字程度で、作品の雰囲気を表現するものを提案してください。\";\n        const baseSystemPrompt = await (0,node_fs_promises__WEBPACK_IMPORTED_MODULE_0__.readFile)((0,node_path__WEBPACK_IMPORTED_MODULE_1__.join)(process.cwd(), \"systemprompt.md\"), \"utf-8\");\n        const systemPrompt = `${baseSystemPrompt.trim()}\\n\\n---\\n\\n出力形式（JSON）：\\n{\\n  \\\"title\\\": \\\"タイトル（5〜10文字）\\\",\\n  \\\"description\\\": \\\"コメント（150〜250文字、高村さんの語り口で）\\\"\\n}\\n\\n重要：\\n- JSONのみを出力してください\\n- 説明文やマークダウンは不要です\\n- ${titleInstruction}`;\n        const userPrompt = `この花の写真を見て、高村和弘さんの語り口でコメントを書いてください。${contextStr}${regenerate ? \"\\n\\n※ 前回とは違う視点でコメントを書いてください。\" : \"\"}`;\n        // Call Gemini API\n        const model = genAI.getGenerativeModel({\n            model: \"gemini-3-flash-preview\",\n            systemInstruction: systemPrompt\n        });\n        const result = await model.generateContent([\n            {\n                inlineData: {\n                    data: base64Image,\n                    mimeType: mediaType\n                }\n            },\n            userPrompt\n        ]);\n        const responseText = result.response.text();\n        // Try to parse as JSON\n        let parsed;\n        try {\n            // Remove any markdown code blocks if present\n            const jsonStr = responseText.replace(/```json\\n?|\\n?```/g, \"\").trim();\n            parsed = JSON.parse(jsonStr);\n        } catch  {\n            // If parsing fails, try to extract title and description\n            const titleMatch = responseText.match(/\"title\"\\s*:\\s*\"([^\"]+)\"/);\n            const descMatch = responseText.match(/\"description\"\\s*:\\s*\"([^\"]+)\"/);\n            parsed = {\n                title: titleMatch ? titleMatch[1] : title || \"無題\",\n                description: descMatch ? descMatch[1] : responseText.slice(0, 250)\n            };\n        }\n        return res.status(200).json(parsed);\n    } catch (error) {\n        console.error(\"Analyze error:\", error);\n        return res.status(500).json({\n            error: \"Failed to analyze image\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVUsQ0FBQyxFQUFFLEdBQUk3QyxTQUFTO2dCQUM5Q2dELGFBQWFELFlBQVlBLFNBQVMsQ0FBQyxFQUFFLEdBQUdWLGFBQWFZLEtBQUssQ0FBQyxHQUFHO1lBQ2hFO1FBQ0Y7UUFFQSxPQUFPdkQsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQzJDO0lBRTlCLEVBQUUsT0FBTzFDLE9BQU87UUFDZG9ELFFBQVFwRCxLQUFLLENBQUMsa0JBQWtCQTtRQUNoQyxPQUFPSixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBMEI7SUFDakU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2thenVoaXJvLXRha2FtdXJhLWxwLy4vcGFnZXMvYXBpL2FuYWx5emUuanM/ZDJiYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZWFkRmlsZSB9IGZyb20gJ25vZGU6ZnMvcHJvbWlzZXMnO1xuaW1wb3J0IHsgam9pbiB9IGZyb20gJ25vZGU6cGF0aCc7XG5pbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUkgfSBmcm9tICdAZ29vZ2xlL2dlbmVyYXRpdmUtYWknO1xuXG5jb25zdCBnZW5BSSA9IG5ldyBHb29nbGVHZW5lcmF0aXZlQUkocHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkpO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgaW1hZ2VVcmwsIHRpdGxlLCByZWNpcGllbnQsIHNpdHVhdGlvbiwgbm90ZXMsIHJlZ2VuZXJhdGUgfSA9IHJlcS5ib2R5O1xuXG4gICAgaWYgKCFpbWFnZVVybCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbWFnZSBVUkwgaXMgcmVxdWlyZWQnIH0pO1xuICAgIH1cblxuICAgIC8vIEZldGNoIHRoZSBpbWFnZSBhbmQgY29udmVydCB0byBiYXNlNjRcbiAgICBjb25zdCBpbWFnZVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goaW1hZ2VVcmwpO1xuICAgIGNvbnN0IGltYWdlQnVmZmVyID0gYXdhaXQgaW1hZ2VSZXNwb25zZS5hcnJheUJ1ZmZlcigpO1xuICAgIGNvbnN0IGJhc2U2NEltYWdlID0gQnVmZmVyLmZyb20oaW1hZ2VCdWZmZXIpLnRvU3RyaW5nKCdiYXNlNjQnKTtcblxuICAgIC8vIERldGVybWluZSBtZWRpYSB0eXBlXG4gICAgY29uc3QgY29udGVudFR5cGUgPSBpbWFnZVJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSB8fCAnaW1hZ2UvanBlZyc7XG4gICAgY29uc3QgbWVkaWFUeXBlID0gY29udGVudFR5cGUuaW5jbHVkZXMoJ3BuZycpID8gJ2ltYWdlL3BuZycgOiAnaW1hZ2UvanBlZyc7XG5cbiAgICAvLyBCdWlsZCB0aGUgcHJvbXB0XG4gICAgY29uc3QgY29udGV4dFBhcnRzID0gW107XG4gICAgaWYgKHJlY2lwaWVudCkgY29udGV4dFBhcnRzLnB1c2goYOi0iOOCiuWFiDogJHtyZWNpcGllbnR9YCk7XG4gICAgaWYgKHNpdHVhdGlvbikgY29udGV4dFBhcnRzLnB1c2goYOOCt+ODgeODpeOCqOODvOOCt+ODp+ODszogJHtzaXR1YXRpb259YCk7XG4gICAgaWYgKG5vdGVzKSBjb250ZXh0UGFydHMucHVzaChg6KOc6Laz44Oh44OiOiAke25vdGVzfWApO1xuXG4gICAgY29uc3QgY29udGV4dFN0ciA9IGNvbnRleHRQYXJ0cy5sZW5ndGggPiAwIFxuICAgICAgPyBgXFxuXFxu44CQ5YWl5Yqb5oOF5aCx44CRXFxuJHtjb250ZXh0UGFydHMuam9pbignXFxuJyl9YFxuICAgICAgOiAnJztcblxuICAgIGNvbnN0IHRpdGxlSW5zdHJ1Y3Rpb24gPSB0aXRsZSBcbiAgICAgID8gYOOCv+OCpOODiOODq+OBr+OAjCR7dGl0bGV944CN44KS5L2/55So44GX44Gm44GP44Gg44GV44GE44CCYFxuICAgICAgOiAn44K/44Kk44OI44Or44GvNeOAnDEw5paH5a2X56iL5bqm44Gn44CB5L2c5ZOB44Gu6Zuw5Zuy5rCX44KS6KGo54++44GZ44KL44KC44Gu44KS5o+Q5qGI44GX44Gm44GP44Gg44GV44GE44CCJztcblxuICAgIGNvbnN0IGJhc2VTeXN0ZW1Qcm9tcHQgPSBhd2FpdCByZWFkRmlsZShqb2luKHByb2Nlc3MuY3dkKCksICdzeXN0ZW1wcm9tcHQubWQnKSwgJ3V0Zi04Jyk7XG4gICAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gYCR7YmFzZVN5c3RlbVByb21wdC50cmltKCl9XFxuXFxuLS0tXFxuXFxu5Ye65Yqb5b2i5byP77yISlNPTu+8ie+8mlxcbntcXG4gIFxcXCJ0aXRsZVxcXCI6IFxcXCLjgr/jgqTjg4jjg6vvvIg144CcMTDmloflrZfvvIlcXFwiLFxcbiAgXFxcImRlc2NyaXB0aW9uXFxcIjogXFxcIuOCs+ODoeODs+ODiO+8iDE1MOOAnDI1MOaWh+Wtl+OAgemrmOadkeOBleOCk+OBruiqnuOCiuWPo+OBp++8iVxcXCJcXG59XFxuXFxu6YeN6KaB77yaXFxuLSBKU09O44Gu44G/44KS5Ye65Yqb44GX44Gm44GP44Gg44GV44GEXFxuLSDoqqzmmI7mlofjgoTjg57jg7zjgq/jg4Djgqbjg7Pjga/kuI3opoHjgafjgZlcXG4tICR7dGl0bGVJbnN0cnVjdGlvbn1gO1xuXG4gICAgY29uc3QgdXNlclByb21wdCA9IGDjgZPjga7oirHjga7lhpnnnJ/jgpLopovjgabjgIHpq5jmnZHlkozlvJjjgZXjgpPjga7oqp7jgorlj6PjgafjgrPjg6Hjg7Pjg4jjgpLmm7jjgYTjgabjgY/jgaDjgZXjgYTjgIIke2NvbnRleHRTdHJ9JHtyZWdlbmVyYXRlID8gJ1xcblxcbuKAuyDliY3lm57jgajjga/pgZXjgYboppbngrnjgafjgrPjg6Hjg7Pjg4jjgpLmm7jjgYTjgabjgY/jgaDjgZXjgYTjgIInIDogJyd9YDtcblxuICAgIC8vIENhbGwgR2VtaW5pIEFQSVxuICAgIGNvbnN0IG1vZGVsID0gZ2VuQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHtcbiAgICAgIG1vZGVsOiAnZ2VtaW5pLTMtZmxhc2gtcHJldmlldycsXG4gICAgICBzeXN0ZW1JbnN0cnVjdGlvbjogc3lzdGVtUHJvbXB0LFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbW9kZWwuZ2VuZXJhdGVDb250ZW50KFtcbiAgICAgIHsgaW5saW5lRGF0YTogeyBkYXRhOiBiYXNlNjRJbWFnZSwgbWltZVR5cGU6IG1lZGlhVHlwZSB9IH0sXG4gICAgICB1c2VyUHJvbXB0LFxuICAgIF0pO1xuXG4gICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gcmVzdWx0LnJlc3BvbnNlLnRleHQoKTtcbiAgICBcbiAgICAvLyBUcnkgdG8gcGFyc2UgYXMgSlNPTlxuICAgIGxldCBwYXJzZWQ7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFJlbW92ZSBhbnkgbWFya2Rvd24gY29kZSBibG9ja3MgaWYgcHJlc2VudFxuICAgICAgY29uc3QganNvblN0ciA9IHJlc3BvbnNlVGV4dC5yZXBsYWNlKC9gYGBqc29uXFxuP3xcXG4/YGBgL2csICcnKS50cmltKCk7XG4gICAgICBwYXJzZWQgPSBKU09OLnBhcnNlKGpzb25TdHIpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gSWYgcGFyc2luZyBmYWlscywgdHJ5IHRvIGV4dHJhY3QgdGl0bGUgYW5kIGRlc2NyaXB0aW9uXG4gICAgICBjb25zdCB0aXRsZU1hdGNoID0gcmVzcG9uc2VUZXh0Lm1hdGNoKC9cInRpdGxlXCJcXHMqOlxccypcIihbXlwiXSspXCIvKTtcbiAgICAgIGNvbnN0IGRlc2NNYXRjaCA9IHJlc3BvbnNlVGV4dC5tYXRjaCgvXCJkZXNjcmlwdGlvblwiXFxzKjpcXHMqXCIoW15cIl0rKVwiLyk7XG4gICAgICBcbiAgICAgIHBhcnNlZCA9IHtcbiAgICAgICAgdGl0bGU6IHRpdGxlTWF0Y2ggPyB0aXRsZU1hdGNoWzFdIDogKHRpdGxlIHx8ICfnhKHpoYwnKSxcbiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NNYXRjaCA/IGRlc2NNYXRjaFsxXSA6IHJlc3BvbnNlVGV4dC5zbGljZSgwLCAyNTApLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24ocGFyc2VkKTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0FuYWx5emUgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGFuYWx5emUgaW1hZ2UnIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsicmVhZEZpbGUiLCJqb2luIiwiR29vZ2xlR2VuZXJhdGl2ZUFJIiwiZ2VuQUkiLCJwcm9jZXNzIiwiZW52IiwiR0VNSU5JX0FQSV9LRVkiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiaW1hZ2VVcmwiLCJ0aXRsZSIsInJlY2lwaWVudCIsInNpdHVhdGlvbiIsIm5vdGVzIiwicmVnZW5lcmF0ZSIsImJvZHkiLCJpbWFnZVJlc3BvbnNlIiwiZmV0Y2giLCJpbWFnZUJ1ZmZlciIsImFycmF5QnVmZmVyIiwiYmFzZTY0SW1hZ2UiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJjb250ZW50VHlwZSIsImhlYWRlcnMiLCJnZXQiLCJtZWRpYVR5cGUiLCJpbmNsdWRlcyIsImNvbnRleHRQYXJ0cyIsInB1c2giLCJjb250ZXh0U3RyIiwibGVuZ3RoIiwidGl0bGVJbnN0cnVjdGlvbiIsImJhc2VTeXN0ZW1Qcm9tcHQiLCJjd2QiLCJzeXN0ZW1Qcm9tcHQiLCJ0cmltIiwidXNlclByb21wdCIsIm1vZGVsIiwiZ2V0R2VuZXJhdGl2ZU1vZGVsIiwic3lzdGVtSW5zdHJ1Y3Rpb24iLCJyZXN1bHQiLCJnZW5lcmF0ZUNvbnRlbnQiLCJpbmxpbmVEYXRhIiwiZGF0YSIsIm1pbWVUeXBlIiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2UiLCJ0ZXh0IiwicGFyc2VkIiwianNvblN0ciIsInJlcGxhY2UiLCJKU09OIiwicGFyc2UiLCJ0aXRsZU1hdGNoIiwibWF0Y2giLCJkZXNjTWF0Y2giLCJkZXNjcmlwdGlvbiIsInNsaWNlIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/analyze.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalyze&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fanalyze.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();